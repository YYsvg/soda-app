<div class="mx-auto" style="width: 700px;">
<% pagename = "支出の一覧" %>
  <h1 class="card-title"><%= pagename %></h1>

<br><br>

<table class="table table-hover">
    <thead>
      <tr>
        <th>No</th>
        <th>カテゴリー</th>
        <th>金額(円)</th>
        <th>内容</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @outcomes.each do |outcome| %>
        <tr>
          <td><%= outcome[:id] %></td>
          <td><%= outcome.outcome_category.name %></td>
          <td><%= outcome.price %></td>
          <td><%= outcome.memo %></td>
          <td><%= image_tag outcome.image.thumb50.url %>
          <td><%= link_to "詳細", outcome_path(outcome), class: "btn btn-primary btn-sm" %></td>
          <td><%= link_to "編集", edit_outcome_path(outcome.id) %></td>
          <td><%= link_to "削除", outcome_path(outcome.id), method: :delete, data: { confirm: '本当に削除しますか？' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

</div>


<canvas id="myChart" width="200" height="200"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
var ctx = document.getElementById('myChart');
var myChart = new Chart(ctx, {
    type: 'pie',
    data: {
        labels: ['食費', '学用品', '部活', '交通費', 'おでかけ', 'プレゼント'],
        datasets: [{
            label: '内訳',
            data: [12000, 1900, 300, 5000, 200, 300],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        plugins: {
            legend: {
                display: true,
                position: 'bottom',
            },
            tooltip: {
                callbacks: {
                    label: function(context) {
                        var label = context.label || '';
                        if (label) {
                            label += ': ';
                        }
                        label += Math.round(context.parsed) / 100 + '%';

                        return label;
                    }
                }
            }
        }
    }
});
</script>

  <div>
    <%= link_to "トップページへ戻る", root_path %>
  </div>
</div>

